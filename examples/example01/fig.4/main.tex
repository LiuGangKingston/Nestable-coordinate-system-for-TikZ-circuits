\documentclass[tikz,border=5mm]{standalone}
\usepackage[siunitx]{circuitikz}
\usetikzlibrary{shapes,arrows,positioning}
\input{afewmorecommandsintikzpiture}






\begin{document}

\ctikzset{
/tikz/circuitikz/bipoles/length=1cm
}



 
 
\begin{circuitikz} [scale=0.8]
 
%%%%%% The next line is for fig. 4.
\input{coordganglb}

% Draw related part of the coordinate system with dashed helplines with letters as background, which would help to determine all coordinates. 
\coordinatebackgroundxy{gangliu} {f}{g}{v} {f}{g}{q};

%%%%%% The next line is for fig. 3.
\coordinatebackgroundxy{gangla}{a}{b}{h} {a}{b}{h};

%%%%%% The next line is for fig. 4.
\coordinatebackgroundxy{ganglb}{a}{b}{f} {a}{b}{g};

\draw [white] (gangliupppdp) -- (gangliupppgp);


% Draw the Opamp at the coordinate (gangliupppli) and name it as "myopamp".
\draw (gangliupppli) 
      node [op amp] (myopamp) {} ; 

% Retrieve the x- and y-components of the coordinates of the "+", "-", and "out" pins of myopamp, supposing we have no idea about them beforehand. 
\getxyingivenunit{cm}{(myopamp.+)}
                 {\myopamppx}{\myopamppy};
\getxyingivenunit{cm}{(myopamp.-)}
                 {\myopampnx}{\myopampny};
\getxyingivenunit{cm}{(myopamp.out)}
                 {\myopampox}{\myopampoy};

\draw (myopamp.-) -| (gangliupppjj) 
      to [R, l_=$R_F \text{=} 300K \Omega$,
                label/align=rotate] 
      (gangliupppjm) 
%%%%%% removed for fig. 2: -| (gangliupppni)
      ;

\draw [-o] (myopamp.out) 
      to[short, xshift=1mm] 
      (\gangliuxxxq, \myopampoy) node [anchor=north, yshift=-1mm] {$V_0$};

\draw (\gangliuxxxj, \myopampny) -- 
      (\gangliuxxxi, \myopampny) 
      to [R, l_=$R \text{=} 100 K\Omega$]  (\gangliuxxxg, \myopampny) -- (gangliupppgi) node [ground]{};;

\draw [-o] (myopamp.+) 
      to[short, xshift=-1mm] 
      (\gangliuxxxj, \myopamppy) node [anchor=north, yshift=-1mm] {$V_i$};
      
      
      

%%%%%% The rest are added for fig. 2.      
%%%%%% The rest are added for fig. 2.      

\draw (gangliuppppi) |- (gangliupppno) --
      (gangliupppnn);

\draw (gangliupppnk) node [ground]{} --
      (gangliupppnl) 
      to[american potentiometer,n=mypot, 
         l_=$R_P \text{=} 56 K \Omega$, label/align=rotate] 
      (gangliupppnn);

%%%%%% Remove the following line for Fig. 3. 
%\draw (mypot.wiper) 
%      node [red, anchor=south east] {$V_A$} -| 
%      (gangliupppjm);


%%%%%% Add the rest lines for Fig. 3. 
\getxyingivenunit{cm}{(mypot.wiper)}
                 {\mypotwiperx}{\mypotwipery};

\draw (mypot.wiper) 
      node [red, anchor=south east] {$V_A$} -- (\ganglaxxxe, \mypotwipery);

\draw (\ganglaxxxe, \mypotwipery)  
      to[variable american resistor, n=resistora, 
         l=$R_D \text{=} 560K \Omega$] 
      (\ganglaxxxc, \mypotwipery) -- 
      (\ganglaxxxb, \mypotwipery) 
      node [red, anchor=south] {$V_B$};

\draw (\ganglaxxxb, \mypotwipery) -- 
      (ganglapppbd)
      to [C, l=$C_D \text{=} 100 \mu F$] 
      (ganglapppbb) node [ground] {};

%%%%%% Remove the following line for fig. 4.
%\draw (gangliupppjm) -- (\ganglaxxxb, \mypotwipery);


%%%%%% Add the rest lines for fig. 4.

\draw (\ganglbxxxc, \mypotwipery)
      to [C, l_=$C_I \text{=} 200 \mu F$] 
      (\ganglbxxxf, \mypotwipery) --
      (\ganglaxxxb, \mypotwipery);

\draw (\ganglbxxxc, \mypotwipery) -- 
      (ganglbpppcd)
      to[variable american resistor, n=resistorb, 
         l=$R_I \text{=} 4.7M \Omega$] 
      (ganglbpppcb) node [ground] {};
      

\draw (\ganglbxxxc, \mypotwipery) 
        node [red, anchor=south] {$V_C$} --
      (gangliupppjm);


\end{circuitikz}



\end{document}
